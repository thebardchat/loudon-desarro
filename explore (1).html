<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Explore — Loudon / DeSarro</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800&family=Barlow+Condensed:wght@300;400;500;600&family=Barlow:wght@300;400&display=swap');
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:#060608;color:#fff;font-family:'Barlow',sans-serif;overflow:hidden}
  #C{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1}
  #hud{position:fixed;z-index:5;top:0;left:0;width:100%;height:100%;pointer-events:none}
  .bar{position:absolute;top:0;left:0;right:0;height:52px;background:linear-gradient(180deg,rgba(6,6,8,.78) 0%,transparent);display:flex;justify-content:space-between;align-items:center;padding:0 20px}
  .brand{font-family:'Playfair Display';font-weight:700;font-size:13px}.brand span{color:#d4af37}
  .tinf{font-family:'Barlow Condensed';font-size:9px;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,0.18)}
  .back{position:absolute;top:58px;left:12px;pointer-events:auto}
  .back a{font-family:'Barlow Condensed';font-size:10px;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,0.2);text-decoration:none}.back a:hover{color:#d4af37}
  #vl{position:absolute;bottom:60px;left:50%;transform:translateX(-50%);text-align:center}
  .vn{font-family:'Playfair Display';font-weight:700;font-size:17px;text-shadow:0 2px 10px rgba(0,0,0,.9)}
  .vd{font-family:'Barlow Condensed';font-size:10px;letter-spacing:2px;color:#d4af37;margin-top:2px;text-transform:uppercase}
  .nav{position:absolute;bottom:14px;left:50%;transform:translateX(-50%);display:flex;gap:3px;pointer-events:auto;flex-wrap:wrap;justify-content:center;max-width:98vw}
  .nb{padding:6px 10px;background:rgba(6,6,8,.55);border:1px solid rgba(212,175,55,.08);color:rgba(255,255,255,.32);font-family:'Barlow Condensed';font-size:9px;letter-spacing:1.5px;text-transform:uppercase;cursor:pointer;transition:all .2s;white-space:nowrap}
  .nb:hover,.nb.on{background:rgba(212,175,55,.08);border-color:rgba(212,175,55,.28);color:#d4af37}
</style>
</head>
<body>
<div id="C"></div>
<div id="hud">
  <div class="bar"><div class="brand">Loudon / <span>DeSarro</span></div><div class="tinf">50,000 SF · Full Facility</div></div>
  <div class="back"><a href="index.html">← Back</a></div>
  <div id="vl"><div class="vn" id="VN">Exterior</div><div class="vd" id="VD">200' × 250' Quonset Hangar</div></div>
  <div class="nav">
    <button class="nb on" onclick="vw(0)">Exterior</button>
    <button class="nb" onclick="vw(1)">Entrance</button>
    <button class="nb" onclick="vw(2)">Concessions</button>
    <button class="nb" onclick="vw(3)">Wrestling</button>
    <button class="nb" onclick="vw(4)">Turf + S&C</button>
    <button class="nb" onclick="vw(5)">Glass Doors</button>
    <button class="nb" onclick="vw(6)">Lockers</button>
    <button class="nb" onclick="vw(7)">PLEX FLEX</button>
    <button class="nb" onclick="vw(8)">Outdoor Field</button>
    <button class="nb" onclick="vw(9)">Aerial</button>
    <button class="nb" onclick="vw(10)">▶ Tour</button>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
const F=.3048,BW=200*F,BL=250*F,BH=65*F,WX=BW;
const BEAM_L=20*F,BEAM_H=2.5*F,ROWS=16,SECS=12,SEC_L=BL/SECS;
const MS=42*F;

const R=new THREE.WebGLRenderer({antialias:false,powerPreference:'high-performance'});
R.setSize(innerWidth,innerHeight);R.setPixelRatio(1);
R.toneMapping=THREE.ACESFilmicToneMapping;R.toneMappingExposure=1.05;
document.getElementById('C').appendChild(R.domElement);
const sc=new THREE.Scene();sc.background=new THREE.Color(0x0a0e14);
const cam=new THREE.PerspectiveCamera(50,innerWidth/innerHeight,0.5,500);

sc.add(new THREE.AmbientLight(0x506080,0.45));
sc.add(new THREE.HemisphereLight(0x8ecae6,0x2a1f0a,0.5));
const sun=new THREE.DirectionalLight(0xfff0d0,1.5);sun.position.set(60,80,40);sc.add(sun);
[{x:BW*.3,y:10,z:BL*.3},{x:BW*.3,y:10,z:BL*.6},{x:BW*.7,y:8,z:BL*.4},{x:BW/2,y:6,z:8}].forEach(l=>{
  const p=new THREE.PointLight(0xffeedd,0.9,50);p.position.set(l.x,l.y,l.z);sc.add(p);
});

const m=(c,o)=>new THREE.MeshLambertMaterial({color:c,...(o||{})});
const M={
  slab:m(0x7a7a78),metal:m(0x2a3848),glass:m(0x88ccee,{transparent:true,opacity:0.15}),
  glassFr:m(0x445566,{transparent:true,opacity:0.08}),steel:m(0x484848),
  mat:m(0xa01020),gold:m(0xd4af37),turf:m(0x2d7a30),white:m(0xeeeeee),
  rubber:m(0x1a1a1e),wall:m(0xe5e0d8),office:m(0xb8a07a),
  concrete:m(0x8a8a85),seat:m(0x9a9a95),track:m(0x555555),
  door:m(0xd4af37),asphalt:m(0x2a2a2a),ground:m(0x1e2a16),
  equip:m(0x222228),field:m(0x1a5a20),conc:m(0xc06020),
  merch:m(0x8040a0),locker:m(0x3050a0),ticket:m(0xc0a020),
  bath:m(0x3080b0),
};
function bx(w,h,d,x,y,z,mt){const o=new THREE.Mesh(new THREE.BoxGeometry(w,h,d),mt);o.position.set(x,y,z);sc.add(o);return o}

// Ground
bx(400,0.01,400, BW/2,-0.3,BL/2, M.ground);
bx(80,0.06,28, BW/2,-0.18,BL+18, M.asphalt); // parking south
for(let i=0;i<20;i++)bx(0.06,0.01,4, 8+i*3,-0.12,BL+18, M.white);
// Food truck spots
for(let i=0;i<5;i++){bx(3,1.5,1.8, 12+i*8,0.75,BL+12, m(0xd4af37,{transparent:true,opacity:0.3}))}
bx(60,0.04,BL, -30,-0.2,BL/2, M.field); // outdoor field WEST side... wait

// CORRECTED: East side outdoor field (where PLEX FLEX deploys)
// Actually per Shane: East wall is where beams go, outside east is the field
// But the glass garage doors are on WEST wall
// Let me re-read: "west wall glass garage doors, same as s&c along with turf"
// "East wall outside soccer/football training field in between where retractable beam"
// So PLEX FLEX beams go through EAST wall, field is EAST outside
bx(60,0.04,BL, BW+30,-0.2,BL/2, M.field);

// Slab
bx(BW+0.3,0.18,BL+0.3, BW/2,-0.09,BL/2, M.slab);

// Shell
(function(){
  const a=BW/2,b=BH,seg=20,t=0.5;
  const shape=new THREE.Shape();
  shape.moveTo(-a,0);
  for(let i=0;i<=seg;i++){const ang=Math.PI*i/seg;shape.lineTo(-a*Math.cos(ang),b*Math.sin(ang));}
  shape.lineTo(a,0);
  const hole=new THREE.Path();
  hole.moveTo(-(a-t),0);
  for(let i=0;i<=seg;i++){const ang=Math.PI*i/seg;hole.lineTo(-(a-t)*Math.cos(ang),(b-t)*Math.sin(ang));}
  hole.lineTo(a-t,0);
  shape.holes.push(hole);
  const geo=new THREE.ExtrudeGeometry(shape,{steps:1,depth:BL,bevelEnabled:false});
  const mesh=new THREE.Mesh(geo,M.metal);mesh.position.set(BW/2,0,0);sc.add(mesh);
  const cs=new THREE.Shape();cs.moveTo(-a,0);
  for(let i=0;i<=seg;i++){const ang=Math.PI*i/seg;cs.lineTo(-a*Math.cos(ang),b*Math.sin(ang));}
  cs.lineTo(a,0);
  const cg=new THREE.ShapeGeometry(cs);
  // North cap glass
  const nm=new THREE.Mesh(cg,M.glassFr);nm.position.set(BW/2,0,0.01);sc.add(nm);
  // South cap (entrance side) — more solid
  const sm=new THREE.Mesh(cg.clone(),m(0x1e2830,{transparent:true,opacity:0.5}));sm.position.set(BW/2,0,BL-0.01);sc.add(sm);
})();

// Steel ribs
for(let f=0;f<=10;f++){
  const z=f*25*F,seg=16,pts=[];
  for(let i=0;i<=seg;i++){const ang=Math.PI*i/seg;pts.push(new THREE.Vector3(-BW/2*Math.cos(ang)+BW/2,BH*Math.sin(ang),z));}
  sc.add(new THREE.Mesh(new THREE.TubeGeometry(new THREE.CatmullRomCurve3(pts),seg,0.12,4,false),M.steel));
}

// ===== WEST WALL — Glass Garage Doors =====
for(let i=0;i<10;i++){
  const z=i*BL/10+BL/20;
  const g=new THREE.Mesh(new THREE.PlaneGeometry(BL/10-0.3,16*F),M.glass);
  g.position.set(0.15,8*F+1,z);g.rotation.y=-Math.PI/2;sc.add(g);
  bx(0.05,16*F,0.05, 0.1,8*F+1,i*BL/10, M.door); // gold frame
  bx(BL/10-0.3,0.05,0.05, 0.1,16*F+1,z, M.door); // top frame
}

// ===== WEST SIDE INTERIOR — Turf + S&C =====
// Turf runs along west wall
const TW=30*F, TL=120*F, TX=3*F;
const TURF_Z_START=60*F; // starts after south amenities zone
bx(TW,0.03,TL, TX+TW/2,0.015,TURF_Z_START+TL/2, M.turf);
for(let y=0;y<=8;y++)bx(TW-1,0.004,0.06, TX+TW/2,0.035,TURF_Z_START+y*15*F, M.white);

// S&C next to turf (east of turf, still on west side)
const SCX=TX+TW+3*F, SCW=25*F;
bx(SCW,0.03,TL, SCX+SCW/2,0.015,TURF_Z_START+TL/2, M.rubber);
for(let i=0;i<6;i++){
  bx(1.2,2.2,1.2, SCX+3,1.1,TURF_Z_START+5+i*8, M.steel);
  bx(2,0.12,1.5, SCX+7,0.06,TURF_Z_START+5+i*8, M.rubber);
}
for(let i=0;i<6;i++){
  bx(0.5,0.4,1.2, SCX+SCW-2,0.2,TURF_Z_START+4+i*7, M.equip);
  bx(0.04,1,0.04, SCX+SCW-2,0.9,TURF_Z_START+4+i*7, M.steel);
}
bx(0.5,1.2,14, SCX+SCW-4,0.6,TURF_Z_START+TL/2, M.steel);

// ===== SOUTH END — Entrance Zone =====
const EZ=50*F; // entrance zone depth from south wall
const EZS=BL-EZ; // entrance zone start (z)

// Ticket booth
bx(8*F,10*F,6*F, 8*F,5*F,EZS+3*F, M.ticket);
// Front concessions
bx(14*F,10*F,6*F, 22*F,5*F,EZS+3*F, M.conc);
// Merch
bx(10*F,10*F,6*F, 40*F,5*F,EZS+3*F, M.merch);
// Bathrooms
bx(10*F,10*F,6*F, 52*F,5*F,EZS+3*F, M.bath);
// Rear concessions
bx(12*F,10*F,6*F, BW-14*F,5*F,EZS+3*F, M.conc);

// Locker rooms (backed against inside wall)
bx(14*F,10*F,8*F, 10*F,5*F,EZS+12*F, M.locker);
bx(14*F,10*F,8*F, 28*F,5*F,EZS+12*F, M.locker);

// Small offices
bx(8*F,10*F,8*F, 46*F,5*F,EZS+12*F, M.office);
bx(8*F,10*F,8*F, 56*F,5*F,EZS+12*F, M.office);

// Entrance doors (gold)
bx(4,4.5,0.15, BW*.35,2.25,BL-0.1, M.door);
bx(4,4.5,0.15, BW*.5,2.25,BL-0.1, M.door);
// Sign
bx(16,3,0.08, BW*.42,BH*.4,BL-0.2, m(0x0a0a0e));
bx(17,0.05,0.1, BW*.42,BH*.4-1.6,BL-0.22, M.door);

// ===== NORTH END — Wrestling Arena =====
const WZ=70*F; // wrestling zone
// 3 mats
function mkMat(x,z){
  bx(MS,0.06,MS, x+MS/2,0.03,z+MS/2, M.mat);
  const c=new THREE.Mesh(new THREE.CylinderGeometry(3,3,0.01,12),M.gold);
  c.position.set(x+MS/2,0.07,z+MS/2);sc.add(c);
  const r=new THREE.Mesh(new THREE.TorusGeometry(5.8,0.07,6,20),M.gold);
  r.rotation.x=-Math.PI/2;r.position.set(x+MS/2,0.07,z+MS/2);sc.add(r);
}
mkMat(BW/2-MS-3*F, 5*F);
mkMat(BW/2+3*F, 5*F);
mkMat(BW/2-MS/2, 5*F+MS+5*F);

// ===== EAST SIDE — PLEX FLEX Beams (deployed inside) =====
const beams=[];
for(let row=0;row<ROWS;row++){
  const y=row*BEAM_H+BEAM_H/2;
  for(let sec=0;sec<SECS;sec++){
    const z=sec*SEC_L+SEC_L/2;
    const stag=row*0.15;
    const x=WX-BEAM_L/2-stag;
    bx(BEAM_L,BEAM_H,SEC_L-0.15, x,y,z, M.concrete);
    bx(BEAM_L,0.05,SEC_L-0.15, x,y+BEAM_H/2,z, M.seat);
  }
  bx(BEAM_L*2.5,0.05,0.05, WX,y-BEAM_H/2+0.03,BL/2, M.track);
}
for(let c=0;c<=6;c++){
  const cz=c*BL/6;
  bx(0.3,ROWS*BEAM_H+2,0.3, WX+BEAM_L+2,(ROWS*BEAM_H)/2,cz, M.steel);
  bx(0.3,ROWS*BEAM_H+2,0.3, WX-BEAM_L-2,(ROWS*BEAM_H)/2,cz, M.steel);
}

// ===== VIEWS =====
const V=[
  {p:[-40,25,BL*.6],t:[BW/2,5,BL*.4],n:"Exterior",d:"200' × 250' · Quonset Hangar · West Facade"},
  {p:[BW*.4,3,BL-4],t:[BW*.4,3,BL-10],n:"Grand Entrance",d:"Tickets · Concessions · Merch · Flow Into Arena"},
  {p:[BW*.3,3,BL-12],t:[BW*.3,2,BL-18],n:"Concessions & Amenities",d:"Front + Rear Concessions · Restrooms · Merch"},
  {p:[BW/2,6,3],t:[BW/2,1,WZ*.5],n:"Wrestling Arena",d:"Three NCAA 42'×42' Competition Mats"},
  {p:[4,3.5,TURF_Z_START+TL*.3],t:[SCX,1,TURF_Z_START+TL*.5],n:"Turf & S&C",d:"40-Yard Turf + Strength & Conditioning · West Side"},
  {p:[-8,6,TURF_Z_START+TL*.4],t:[2,4,TURF_Z_START+TL*.4],n:"Glass Garage Doors",d:"Full West Wall Opens For Outdoor Access"},
  {p:[BW*.2,3,BL-15],t:[BW*.15,2,BL-20],n:"Locker Rooms",d:"Men's & Women's · Backed Against Interior Wall"},
  {p:[BW-4,10,BL*.4],t:[BW+5,5,BL*.4],n:"PLEX FLEX™",d:"16 Rows · 2,600 Seats · Deployed Inside"},
  {p:[BW+25,8,BL*.4],t:[BW,4,BL*.4],n:"Outdoor Field",d:"Soccer · Football · Training Field · East Side"},
  {p:[BW/2,95,BL*.45],t:[BW/2,0,BL*.45],n:"Aerial",d:"50,000 SF · Loudon / DeSarro Gymnasium"},
];

let tp=new THREE.Vector3(V[0].p[0],V[0].p[1],V[0].p[2]);
let tl=new THREE.Vector3(V[0].t[0],V[0].t[1],V[0].t[2]),cl=tl.clone();
let at=null;

function vw(i){
  if(i===10){tour();return}
  if(at)clearTimeout(at);at=null;
  const v=V[i];
  tp.set(v.p[0],v.p[1],v.p[2]);tl.set(v.t[0],v.t[1],v.t[2]);
  document.getElementById('VN').textContent=v.n;
  document.getElementById('VD').textContent=v.d;
  document.querySelectorAll('.nb').forEach((b,j)=>b.classList.toggle('on',j===i));
}
function tour(){
  let i=0;
  document.querySelectorAll('.nb').forEach((b,j)=>b.classList.toggle('on',j===10));
  (function nx(){vw(i%V.length);i++;at=setTimeout(()=>{
    document.querySelectorAll('.nb').forEach((b,j)=>b.classList.toggle('on',j===10));nx()},5000)})();
}
vw(0);

let orbT=0,orbP=0,md=false,lm={x:0,y:0};
R.domElement.addEventListener('mousedown',e=>{md=true;lm={x:e.clientX,y:e.clientY};if(at)clearTimeout(at);at=null});
R.domElement.addEventListener('mousemove',e=>{if(!md)return;orbT+=(e.clientX-lm.x)*.003;orbP=Math.max(-.5,Math.min(.5,orbP+(e.clientY-lm.y)*.003));lm={x:e.clientX,y:e.clientY}});
R.domElement.addEventListener('mouseup',()=>md=false);
R.domElement.addEventListener('touchstart',e=>{md=true;lm={x:e.touches[0].clientX,y:e.touches[0].clientY}},{passive:true});
R.domElement.addEventListener('touchmove',e=>{if(!md)return;orbT+=(e.touches[0].clientX-lm.x)*.005;orbP=Math.max(-.5,Math.min(.5,orbP+(e.touches[0].clientY-lm.y)*.005));lm={x:e.touches[0].clientX,y:e.touches[0].clientY}},{passive:true});
R.domElement.addEventListener('touchend',()=>md=false);
R.domElement.addEventListener('wheel',e=>{const d=cam.position.clone().sub(cl).normalize();tp.add(d.multiplyScalar(e.deltaY*.018))});

let last=0;
function anim(t){
  requestAnimationFrame(anim);
  if(t-last<32)return;last=t;
  let fp=tp.clone();
  if(orbT||orbP){
    const off=cam.position.clone().sub(cl);const r=off.length();
    const th=Math.atan2(off.x,off.z)+orbT;
    const ph=Math.max(.1,Math.min(1.4,Math.acos(off.y/r)+orbP));
    fp.set(cl.x+r*Math.sin(ph)*Math.sin(th),cl.y+r*Math.cos(ph),cl.z+r*Math.sin(ph)*Math.cos(th));
  }
  cam.position.lerp(fp,.05);cl.lerp(tl,.05);cam.lookAt(cl);
  orbT*=.92;orbP*=.92;
  R.render(sc,cam);
}
anim(0);
addEventListener('resize',()=>{cam.aspect=innerWidth/innerHeight;cam.updateProjectionMatrix();R.setSize(innerWidth,innerHeight)});
window.vw=vw;
</script>
</body>
</html>
